# シナリオテスト結果報告

実行日時: 2026-02-26 18:00
実行者: Claude Code
対象: code2map v0.1.2

## サマリー

- 結果: **OK: 17 / NG: 0 / MANUAL: 0 / 全 17 項目**
- NG項目: なし

## シナリオ1: 初回セットアップ

| # | 試験項目 | 結果 | 備考 |
|---|---------|------|------|
| 1-1 | clone が成功する | OK | リポジトリ存在確認済み（origin: git@github.com:elvezjp/code2map.git） |
| 1-2 | uv sync が成功する | OK | `Resolved 22 packages in 1ms, Audited 16 packages in 0.08ms` 終了コード 0 |
| 1-3 | --help が表示される | OK | `usage: code2map [-h] {build} ...` が出力された |

## シナリオ2: Python ファイルの解析

| # | 試験項目 | 結果 | 備考 |
|---|---------|------|------|
| 2-1 | コマンドが正常終了する | OK | `uv run code2map build tests/fixtures/sample.py --out /tmp/test_py` 終了コード 0 |
| 2-2 | INDEX.md が生成される | OK | ファイルが存在し 16 行（非空） |
| 2-3 | MAP.json が有効な JSON | OK | `json.load()` でエラーなし |
| 2-4 | part_file が全て実在する | OK | 全ての part_file が `/tmp/test_py/` 内に存在 |
| 2-5 | ファイル名に禁止文字がない | OK | `< > : " / \ \| ? *` を含むファイルなし |

## シナリオ3: Java ファイルの解析

| # | 試験項目 | 結果 | 備考 |
|---|---------|------|------|
| 3-1 | コマンドが正常終了する | OK | `uv run code2map build tests/fixtures/sample.java --out /tmp/test_java` 終了コード 0 |
| 3-2 | ファイル名に禁止文字がない | OK | parts/: `Sample.class.java`, `Sample_work.java` — 禁止文字なし |
| 3-3 | part_file が全て実在する | OK | 全ての part_file が `/tmp/test_java/` 内に存在 |
| 3-4 | INDEX.md のリンク先が実在する | OK | `-> parts/Sample.class.java`, `-> parts/Sample_work.java` — 全て実在 |

## シナリオ4: ドライラン

| # | 試験項目 | 結果 | 備考 |
|---|---------|------|------|
| 4-1 | コマンドが正常終了する | OK | 終了コード 0、シンボル一覧とプレビューが出力された |
| 4-2 | ファイルが生成されない | OK | `/tmp/test_dry/` ディレクトリが存在しない |

## シナリオ5: エラーケース

| # | 試験項目 | 結果 | 備考 |
|---|---------|------|------|
| 5-1 | 存在しないファイル | OK | 終了コード 1、`ERROR: Input file not found: nonexistent_file.py` |
| 5-2 | 空ファイル | OK | 終了コード 0、クラッシュせず正常終了 |
| 5-3 | 非対応ファイル | OK | 終了コード 1、`ERROR: Unable to detect language. Use --lang to specify.` |
